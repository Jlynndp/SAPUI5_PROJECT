<mvc:View xmlns:calendar="sap.ui.unified.calendar" controllerName="logaligroup.sapui5app.controller.ShowEmployee" displayBlock="true"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:suite="sap.suite.ui.commons"
    xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">

    <SplitApp id="SplitAppEmployee" initialMaster="master" initialDetail="detailSelectEmpl" backgroundColor="100">
        <masterPages  >
            <Page id="master" backgroundDesign= "List" showHeader="false">
                <List id="employeeList" items="{employeeModel>/Users}">
                    <headerToolbar>
                        <Toolbar enabled="true" visible="true" width="" design="Solid" style="Standard">
                            <content>
                                <Button icon="sap-icon://navigation-left-arrow" enabled="true" press=".onBack"/>
                                <SearchField id="search_field" placeholder="Buscar" showSearchButton="true" visible="true" width="100%" liveChange=".onSearchField"/>
                            </content>
                        </Toolbar>
                    </headerToolbar>

                    <items>
                        <StandardListItem title="{employeeModel>FirstName} {employeeModel>LastName}" description="{employeeModel>Dni}" type="Active" press="onPressNavToDetail" custom:to="employeeDetail" />
                    </items>
                </List>
            </Page>
        </masterPages>

        <detailPages>
            <Page id="detailSelectEmpl" titleLevel="Auto" showHeader="false" backgroundDesign="Transparent">
                <VBox direction="Column" alignItems="Center" justifyContent="Center" fitContainer="true">
                    <Text text="{i18n>msgSelectEmployee}" visible="true"/>
                </VBox>
                <Panel >
                </Panel>
            </Page>

            <Page id="employeeDetail" showHeader="true" title="{i18n>titleEmployeeDetail}">
                <ObjectHeader icon="{/_iconType}" iconAlt="{employeeModel>Dni}" responsive="true" title="{employeeModel>FirstName} {employeeModel>LastName}" intro="{employeeModel>Dni}" 
                              imageShape="Square" titleLevel="Auto" backgroundDesign="Solid">
                    <!-- <attributes> -->
                    <ObjectAttribute title="{i18n>creationDate}" text="{path:'employeeModel>CreationDate', 
                                                                        type:'sap.ui.model.odata.type.Date', 
                                                                        formatOptions: { style: 'medium'}
                                                                        }"/>
                    <ObjectAttribute title="{i18n>type}" text="{= ${employeeModel>Type}==='0' ? ${i18n>intern} : 
                                                                ${employeeModel>Type}==='1' ? ${i18n>freelance} : 
                                                                ${employeeModel>Type}==='2' ? ${i18n>manager} : ''}"/>
                    <ObjectAttribute title="{i18n>comments}" text="{employeeModel>Comments}" />
                    <!-- </attributes> -->
                </ObjectHeader>

                <IconTabBar expandable="false" expanded="true" applyContentPadding="false" upperCase="false" visible="true" selectedKey="Ok" 
                            class="sapUiResponsiveContentPadding" backgroundDesign="Solid" headerBackgroundDesign="Solid">
                    <items >
                        <IconTabFilter icon="sap-icon://attachment" text="{i18n>files}" design="Horizontal" showAll="false" textDirection="Inherit" enabled="true" visible="true">
                            <!-- <content backgroundDesign="Solid"> -->

                            <!-- component to upload files FilesSet -->
                            <UploadCollection id="UploadCollection" 
                                              maximumFilenameLength="55" 
                                              maximumFileSize="10" 
                                              multiple="true" 
                                              sameFilenameAllowed="false" 
                                              instantUpload="true" 
                                              uploadUrl="sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"
                                              items="{employeeModel>UserToAttachment}" 
                                              change="onFileChange" 
                                              uploadComplete="onFileUploadComplete" 
                                              beforeUploadStarts="onFileBeforeUpload" 
                                              fileDeleted="onFileDeleted">
                                              <items>
                                                <UploadCollectionItem documentId="{employeeModel>AttId}" 
                                                                      fileName="{employeeModel>DocName}" 
                                                                      enableEdit="false" 
                                                                      visibleEdit="false" 
                                                                      press=".downloadFile"/>
                                              </items>
                             </UploadCollection>
                            <!-- </content> -->
                        </IconTabFilter>

                        <IconTabFilter icon="sap-icon://money-bills" text="{i18n>record}" design="Horizontal" showAll="false" textDirection="Inherit" enabled="true" visible="true">
                            <suite:Timeline id="idTimeline" 
                                            enableDoubleSided="true" 
                                            content="{employeeModel>UserToSalary}" 
                                            showHeaderBar="false" 
                                            groupByType="Year"
                                            groupBy="CreationDate"
                                            sortOldestFirst="true"
                                            enableScroll="false"
                                            height="100%">
                                    <suite:TimelineItem id="idTemplateItem" 
                                                        title="{
                                                                parts: [
                                                                    {path: 'employeeModel>Amount'},
                                                                    {path: 'employeeModel>Waers'}
                                                                ],
                                                                type:'sap.ui.model.type.Currency',
                                                                formatOptions: {
                                                                    currencyCode: false,
                                                                    showMeasure: false
                                                                }
                                                            }"
                                                        dateTime="{path:'employeeModel>CreationDate', 
                                                                   type:'sap.ui.model.odata.type.Date', 
                                                                   formatOptions: { style: 'long'}
                                                                   }" 
                                                        text="{employeeModel>Comments}" icon="sap-icon://circle-task">
                                    </suite:TimelineItem>
                            </suite:Timeline>

                        </IconTabFilter>
                    </items>
                </IconTabBar>

                <footer>
                    <Bar>
                        <contentRight>
                            <Button text="{i18n>btnDelete}" press=".onDeleteEmployee"/>
                            <Button text="{i18n>btnPromote}" press=".onPromoteEmployee"/>
                        </contentRight>
                    </Bar>
                </footer>
            </Page>
        </detailPages>

    </SplitApp>

</mvc:View>