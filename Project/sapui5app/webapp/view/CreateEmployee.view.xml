<mvc:View controllerName="logaligroup.sapui5app.controller.CreateEmployee" displayBlock="true"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <NavContainer id="wizardNavContainer">
        <pages>
            <Page id="wizardContentPage" showHeader="false">
                <content>
                    <Wizard id="CreateEmployeeWizard" class="sapUiResponsivePadding--header sapUiResponsivePadding--content" complete="onWizardCompleted" 
                            finishButtonText="{i18n>btnReview}" enableBranching="true" showNextButton="true">

                        <!--step 1: Employee Type selection-->
                        <WizardStep id="EmployeeTypeStep" title="{i18n>employeeType}" validated="false" nextStep="EmployeeDataStep" complete="goToDataStep">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msgEmplType}" showIcon="true"/>
                            <HBox alignItems="Center" justifyContent="Center" width="100%">
                                <SegmentedButton width="320px" selectionChange="setEmployeeType" selectedKey="{employeeModel>/Type}" selectedItem="">
                                    <items>
                                        <SegmentedButtonItem text="{i18n>intern}" key="0"/>
                                        <SegmentedButtonItem text="{i18n>freelance}" key="1"/>
                                        <SegmentedButtonItem text="{i18n>manager}" key="2"/>
                                    </items>
                                </SegmentedButton>
                            </HBox>
                        </WizardStep>

                        <!--step 2: Employee Data Form-->
                        <WizardStep id="EmployeeDataStep" title="{i18n>employeeData}" validated="false" activate="employeeDataValidation" nextStep="AdditionalDataStep">
                            <!-- validated="false" activate="additionalInfoValidation">-->
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msgEmplData}" showIcon="true"/>
                            <form:SimpleForm editable="true">

                                <Label text="{i18n>firstName}" required="true"/>
                                <Input id="i_FirstName" value="{employeeModel>/FirstName}" valueState="{employeeModel>/firstNameState}" liveChange="employeeDataValidation"/>

                                <Label text="{i18n>lastName}" required="true"/>
                                <Input id="i_LastName" value="{employeeModel>/LastName}" valueState="{employeeModel>/lastNameState}" liveChange="employeeDataValidation"/>

                                <Label text="{jsonModelConfig>/dniLabel}" required="true"/>
                                <Input id="i_Dni" value="{employeeModel>/Dni}" valueState="{employeeModel>/dniState}" liveChange="employeeDataValidation"/>

                                <!-- <Label text="{i18n>cif}" required="true"/>
                                <Input value="{/Dni}" valueLiveUpdate="true"/> -->

                                <Label text="{jsonModelConfig>/salaryLabel}"/>
                                <Slider id="i_Salary" enableTickmarks="true" class="sapUiSmallMarginBottom" min="{jsonModelConfig>/salaryMin}" max="{jsonModelConfig>/salaryMax}" 
                                        value="{employeeModel>/Salary}" width="auto" progress="true" step="{jsonModelConfig>/salaryStep}"/>

                                <!-- <Label text="{i18n>dailyPrice}"/>
                                <Slider enableTickmarks="true" class="sapUiSmallMarginBottom" min="100" max="2000" value="400" step="100" width="80%" />

                                <Label text="{i18n>annualSalary}"/>
                                <Slider enableTickmarks="true" class="sapUiSmallMarginBottom" min="12000" max="80000" value="24000" step="2000" /> -->

                                <Label text="{i18n>creationDate}" required="true"/>
                                <DatePicker id="i_CreationDate" value="{employeeModel>/CreationDate}" valueState="{employeeModel>/creationDateState}" change="onChangeCreationDate"/>
                            </form:SimpleForm>
                        </WizardStep>

                        <!--step 3: Additional data-->
                        <WizardStep id="AdditionalDataStep" validated="true" title="{i18n>additionalData}">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msgAddData}" showIcon="true"/>
                            <!-- <form:SimpleForm editable="true"> -->

                            <Label text="{i18n>comments}"/>
                            <TextArea id="TextArea" cols="200" height="100px" value="{employeeModel>/Comments}"/>
                            <!-- </form:SimpleForm> -->

                            <Panel>
                                <!--component to upload files FilesSet-->
                                <UploadCollection id="fileUpload" maximumFilenameLength="55" maximumFileSize="10" multiple="true" sameFilenameAllowed="true" 
                                                  instantUpload="true" numberOfAttachmentsText="{i18n>attachment}" uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments" 
                                                  change="onFileChange" uploadComplete="onFileUploadComplete" beforeUploadStarts="onFileBeforeUpload" fileDeleted="onFileDeleted" />
                            </Panel>
                        </WizardStep>
                    </Wizard>
                </content>
                <footer>
                    <OverflowToolbar>
                        <ToolbarSpacer/>
                        <Button text="{i18n>btnCancel}" press="onWizardCancel"/>
                    </OverflowToolbar>
                </footer>
            </Page>
            <Page id="wizardReviewPage" showHeader="false">
                <content>
                    <!--step 1: Employee Type-->
                    <form:SimpleForm title="1. {i18n>employeeType}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>type}"/>
                            <Text text="{= ${employeeModel>/Type}==='0' ? ${i18n>intern} : ${employeeModel>/Type}==='1' ? ${i18n>freelance} : ${employeeModel>/Type}==='2' ? ${i18n>manager} : ''}"/>

                            <Link press="editStepOne" text="Edit" />
                        </form:content>
                    </form:SimpleForm>

                    <!--step 2: Employee Data-->
                    <form:SimpleForm title="2. {i18n>employeeData}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>firstName}"/>
                            <Text text="{employeeModel>/FirstName}"/>

                            <Label text="{i18n>lastName}"/>
                            <Text text="{employeeModel>/LastName}"/>

                            <Label text="{jsonModelConfig>/dniLabel}" />
                            <Text text="{employeeModel>/Dni}"/>

                            <Label text="{jsonModelConfig>/salaryLabel}"/>
                            <Text text="{employeeModel>/Salary}"/>

                            <Label text="{i18n>creationDate}"/>
                            <Text text="{path: 'employeeModel>/CreationDate',
                                         type: 'sap.ui.model.type.Date',
                                         formatOptions: {
                                             source: { pattern: 'dd-MM-yyyy' },
                                             style: 'medium'}}" />


                            <Link press="editStepTwo" text="Edit" />
                        </form:content>
                    </form:SimpleForm>

                    <!--step 3: Additional data-->
                    <form:SimpleForm title="3. {i18n>additionalData}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>

                            <Label text="{i18n>comments}"/>
                            <Text text="{employeeModel>/Comments}"/>
                            <Label text="{i18n>documents}"/>
                            <Text text="{employeeModel>/Comments}"/>

                            <Link press="editStepThree" text="Edit" />
                        </form:content>
                    </form:SimpleForm>

                </content>
                <footer>
                    <Bar>
                        <contentRight>
                            <Button text="{i18n>btnSubmit}" press="onWizardSubmit"/>
                            <Button text="{i18n>btnCancel}" press="onWizardCancel"/>
                        </contentRight>
                    </Bar>
                </footer>
            </Page>
        </pages>
    </NavContainer>
</mvc:View>
