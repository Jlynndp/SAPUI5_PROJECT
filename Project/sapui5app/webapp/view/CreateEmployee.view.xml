<mvc:View controllerName="logaligroup.sapui5app.controller.CreateEmployee" displayBlock="true"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <NavContainer id="WizardNavContainer">
        <pages>
            <Page id="WizardContentPage" showHeader="false">
                <content>
                    <Wizard id="CreateEmployeeWizard" class="sapUiResponsivePadding--header sapUiResponsivePadding--content" complete="onWizardCompleted" 
                            finishButtonText="{i18n>btnReview}" showNextButton="true" currentStep="EmployeeTypeStep" >

                        <!--step 1: Employee Type selection-->
                        <WizardStep id="EmployeeTypeStep" title="{i18n>employeeType}" validated="false" nextStep="EmployeeDataStep">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msgEmplType}" showIcon="true"/>
                            <HBox alignItems="Center" justifyContent="Center" width="100%">
                                <SegmentedButton id="Btn_Type" width="320px" selectionChange="setEmployeeType" selectedItem="">
                                    <items>
                                        <SegmentedButtonItem id="SB_Item1" text="{i18n>intern}" key="0" />
                                        <SegmentedButtonItem id="SB_Item2" text="{i18n>freelance}" key="1"/>
                                        <SegmentedButtonItem id="SB_Item3" text="{i18n>manager}" key="2"/>
                                        <SegmentedButtonItem id="SB_Item4" text="" key="" visible="false"/>
                                    </items>
                                </SegmentedButton>
                            </HBox>
                        </WizardStep>

                        <!--step 2: Employee Data Form-->
                        <WizardStep id="EmployeeDataStep" title="{i18n>employeeData}" validated="false" nextStep="AdditionalDataStep" activate="employeeDataValidation">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msgEmplData}" showIcon="true"/>
                            <form:SimpleForm editable="true">

                                <Label text="{i18n>firstName}" required="true"/>
                                <Input value="{/FirstName}" valueState="{/_firstNameState}" liveChange="onChangeFirstName"/>

                                <Label text="{i18n>lastName}" required="true"/>
                                <Input value="{/LastName}" valueState="{/_lastNameState}" liveChange="onChangeLastName"/>

                                <Label text="{jsonModelConfig>/dniLabel}" required="true"/>
                                <Input value="{/Dni}" valueState="{/_dniState}" liveChange="onChangeDni"/>

                                <Label text="{jsonModelConfig>/salaryLabel}"/>
                                <Slider enableTickmarks="true" class="sapUiSmallMarginBottom" min="{jsonModelConfig>/salaryMin}" max="{jsonModelConfig>/salaryMax}" 
                                        value="{/Salary}" width="99%" progress="true" step="{jsonModelConfig>/salaryStep}" />

                                <Label text="{i18n>creationDate}" required="true"/>
                                <!-- <DatePicker value="{/CreationDate}" valueState="{/_creationDateState}" change="onChangeCreationDate"/> -->

                                <DatePicker id="DP4" value="{path:'/CreationDate', 
                                                             type:'sap.ui.model.type.Date', 
                                                             formatOptions: { style: 'medium', strictParsing: true}}" 
                                            class="sapUiSmallMarginBottom" required="true"
                                            valueState="{/_creationDateState}"
                                            change="onChangeCreationDate"/>

                            </form:SimpleForm>
                        </WizardStep>

                        <!--step 3: Additional data-->
                        <WizardStep id="AdditionalDataStep" validated="true" title="{i18n>additionalData}">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msgAddData}" showIcon="true"/>

                            <Label text="{i18n>comments}"/>
                            <TextArea id="TextArea" cols="200" height="100px" value="{/Comments}"/>

                            <Panel>
                                <!--component to upload files FilesSet-->
                                <UploadCollection id="UploadCollection"
                                                  maximumFilenameLength="55" 
                                                  maximumFileSize="10" 
                                                  multiple="true" 
                                                  sameFilenameAllowed="false" 
                                                  instantUpload="false" 
                                                  numberOfAttachmentsText="{i18n>attachment}" 
                                                  uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments" 
                                                  change="onFileChange" 
                                                  uploadComplete="onFileUploadComplete" 
                                                  beforeUploadStarts="onFileBeforeUpload" 
                                                  fileDeleted="onFileDeleted" />
                            </Panel>
                        </WizardStep>
                    </Wizard>
                </content>
                <footer>
                    <OverflowToolbar>
                        <ToolbarSpacer/>
                        <Button text="{i18n>btnCancel}" press="onWizardCancel"/>
                    </OverflowToolbar>
                </footer>
            </Page>
            <Page id="wizardReviewPage" showHeader="false">
                <content>
                    <!--step 1: Employee Type-->
                    <form:SimpleForm title="1. {i18n>employeeType}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>type}"/>
                            <Text text="{= ${/Type}==='0' ? ${i18n>intern} : ${/Type}==='1' ? ${i18n>freelance} : ${/Type}==='2' ? ${i18n>manager} : ''}"/>

                            <Link press="editStepOne" text="Edit" />
                        </form:content>
                    </form:SimpleForm>

                    <!--step 2: Employee Data-->
                    <form:SimpleForm title="2. {i18n>employeeData}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>firstName}"/>
                            <Text text="{/FirstName}"/>

                            <Label text="{i18n>lastName}"/>
                            <Text text="{/LastName}"/>

                            <Label text="{jsonModelConfig>/dniLabel}" />
                            <Text text="{/Dni}"/>

                            <Label text="{jsonModelConfig>/salaryLabel}"/>
                            <Text text="{/Salary}"/>

                            <Label text="{i18n>creationDate}"/>
                            <Text text="{path: '/CreationDate',
                                         type: 'sap.ui.model.odata.type.Date',
                                         formatOptions: {style: 'medium'}}" />
                            <Link press="editStepTwo" text="Edit" />
                        </form:content>
                    </form:SimpleForm>

                    <!--step 3: Additional data-->
                    <form:SimpleForm title="3. {i18n>additionalData}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>

                            <Label text="{i18n>comments}"/>
                            <Text text="{/Comments}"/>
                            <Label text="{i18n>documents}"/>

                            <Text text="{/_filesNum} {i18n>files}" visible="{/_filesVisible}" />
                            <Label/>
                            <List items="{/Attachments}" visible="{/_filesVisible}" >
                                <items>
                                    <StandardListItem title="{DocName}"/>
                                </items>
                            </List>
                            <Link press="editStepThree" text="Edit" />


                        </form:content>
                    </form:SimpleForm>

                </content>
                <footer>
                    <Bar>
                        <contentRight>
                            <Button text="{i18n>btnSubmit}" press="onWizardSubmit"/>
                            <Button text="{i18n>btnCancel}" press="onWizardCancel"/>
                        </contentRight>
                    </Bar>
                </footer>
            </Page>
        </pages>
    </NavContainer>
</mvc:View>
